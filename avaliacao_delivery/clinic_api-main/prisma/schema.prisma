generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:senai@127.0.0.1:5432/delivery"
}

// Tabela usuario
model Usuario {
  id     Int      @id @default(autoincrement())
  nome   String
  email  String   @unique
  senha  String
  Driver Driver[]
  token  Token[]

  @@map("usuario")
}

//antigo prontuario
model Driver {
  id_driver  Int        @id @default(autoincrement())
  cnh_number String     @unique
  created_at DateTime
  updated_at DateTime
  status     String
  usuario_id Int
  usuario    Usuario    @relation(fields: [usuario_id], references: [id])
  Vehicle    Vehicle[]
  Delivery   Delivery[]

  @@map("driver")
}

//antiga consulta
model Vehicle {
  id_vehicle  Int      @id @default(autoincrement())
  plate       String   @unique @db.VarChar(8)
  model_name  String
  year        Int
  capacity_kg Decimal
  created_at  DateTime
  updated_at  DateTime
  driver_id   Int
  driver      Driver   @relation(fields: [driver_id], references: [id_driver])

  @@map("vehicle")
}

model Delivery {
  id_delivery                Int      @id @default(autoincrement())
  recipient_name    String
  recipient_address String
  package_details   String
  status            String
  created_at        DateTime
  updated_at        DateTime
  driver_id         Int
  driver            Driver   @relation(fields: [driver_id], references: [id_driver])

  @@map("delivery")
}

model Token {
  id        Int      @id @default(autoincrement())
  token     String   @db.VarChar(255)
  type      String
  usuarioId Int
  revoked   Boolean  @default(value: false)
  expiresAt DateTime
  usuario   Usuario  @relation(fields: [usuarioId], references: [id])

  @@map("token")
}
